<core:View xmlns:u="sap.ui.unified" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:l="sap.ui.layout" xmlns:t="sap.ui.table" xmlns="sap.m" xmlns:ux="sap.ui.ux3" controllerName="controller.NotaSubstitutiva">
<Page visible="{ path: 'Caixa>/aberto', formatter: '.formatterCaixaAberto' }" showFooter="true" showHeader="false">
<content>
<f:SimpleForm editable="true" layout="ResponsiveGridLayout" labelSpanL="4" columnsL="3" columnsM="2">
<f:content>
<core:Title text="Cliente"/>
<Label text="Código"/>
<l:HorizontalLayout>
<Input enabled="true" valueHelpOnly="false" placeholder="Selecionar Cliente" showValueHelp="true" id="idNotaSubsClienteInput" valueHelpRequest="onInputHelpClientes" value="{NotaSubstitutiva>/sClientes/id}"/>
</l:HorizontalLayout>
<!-- <Label text="Código" />	
					<Text text="{NotaSubstitutiva>/sClientes/id}" />
					<Label text="Nome" />
					<Text text="{NotaSubstitutiva>/sClientes/nome}"/>
					<Label text="CPF/CNPJ" /> -->
<Text text="{NotaSubstitutiva>/sClientes/cpf}{NotaSubstitutiva>/sClientes/cnpj}"/>
<Label text="Status ver. Crédito"/>
<Text text="{NotaSubstitutiva>/sClientes/statusCredito}"/>
<core:Title text="Venda"/>
<Label text="Vendedor"/>
<Text text="{NotaSubstitutiva>/sVendedores/nome}"/>
<Label text="Tipo de Venda"/>
<Text text="{NotaSubstitutiva>/sTiposVenda/id} - {NotaSubstitutiva>/sTiposVenda/descricao}"/>
<Label text="Tipo de Frete"/>
<Text text="{NotaSubstitutiva>/sTiposFrete/id} - {NotaSubstitutiva>/sTiposFrete/descricao}"/>
<core:Title text="Informações Adicionais"/>
<TextArea enabled="false" value="{NotaSubstitutiva>/infoAdicional}" rows="4" wrapping="None"/>
</f:content>
</f:SimpleForm>
<t:Table rows="{NotaSubstitutiva>/tItens}" selectionMode="None" visibleRowCount="{NotaSubstitutiva>/tItensCount}">
<t:toolbar>
<Toolbar>
<Title text="Produtos" width="10em"/>
</Toolbar>
</t:toolbar>
<t:columns>
<!-- <t:Column width="3em">
						<t:template>
							<CheckBox selected="{NotaSubstitutiva>devolver}" select="changeDevolverSelection" /> 
						</t:template>
					</t:Column> -->
<t:Column width="16em">
<Label text="Material"/>
<t:template>
<Text text="{NotaSubstitutiva>idMateriais} - {NotaSubstitutiva>sMateriais/descricao}"/>
</t:template>
</t:Column>
<!-- <t:Column width="8em">
						<Label text="Devolver"/>
						<t:template>
							<Input type="Number" enabled="{NotaSubstitutiva>devolver}" value="{NotaSubstitutiva>quantidadeDevolucao}"/>
						</t:template>
					</t:Column> -->
<t:Column width="8em">
<Label text="Qtde. Venda"/>
<t:template>
<Text text="{NotaSubstitutiva>quantidade}"/>
</t:template>
</t:Column>
<t:Column width="8em">
<Label text="Unidade"/>
<t:template>
<Text text="{NotaSubstitutiva>unidade}"/>
</t:template>
</t:Column>
<t:Column width="8em">
<Label text="Valor unitário"/>
<t:template>
<Text text="{ parts: [{path: 'NotaSubstitutiva>valorUnitario'}, {path: 'NotaSubstitutiva>moeda'}] , type:'sap.ui.model.type.Currency' }"/>
</t:template>
</t:Column>
<t:Column width="8em">
<Label text="Valor final da venda"/>
<t:template>
<Text text="{ parts: [{path: 'NotaSubstitutiva>valorTotal'}, {path: 'NotaSubstitutiva>moeda'}] , type:'sap.ui.model.type.Currency' }"/>
</t:template>
</t:Column>
</t:columns>
</t:Table>
</content>
<footer>
<Toolbar>
<core:Fragment fragmentName="view.FooterStatus" type="XML"/>
<ToolbarSpacer/>
<Button tap="onAbreConsultaVendasPorNf" text="Consulta venda" type="Transparent"/>
<Button enabled="{ path: 'NotaSubstitutiva>/id', formatter: '.formatterVendaInformada' }" tap="onFinalizarDevolucao" text="Gerar Nota" type="Accept"/>
</Toolbar>
</footer>
</Page>
<MessagePage visible="{ path: 'Caixa>/aberto', formatter: '.formatterCaixaFechado' }" icon="sap-icon://locked" text="É necessário abrir o caixa para acessar essa funcionalidade" description=""/>
</core:View>
